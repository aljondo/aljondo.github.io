<!DOCTYPE html>
<html>
	<head>
		<title>Programming</title>
		<link rel='shortcut icon' type='image/x-icon' href='6.png' />
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
		<link href='https://fonts.googleapis.com/css?family=Raleway:400,300,700' rel='stylesheet' type='text/css'>
		<link rel="stylesheet" href="fancybox/source/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
		<script type="text/javascript" src="fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
		<script type="text/javascript">
			$(document).ready(function() {
				$(".fancybox").fancybox();
			});
		</script>
		<link rel="stylesheet" type="text/css" href="style.css">
	</head>
	<body>
		<div class="colored-font" id="projects">
			<div id="nav" class="container nav-bar">
	   			  <ul>
	        	    <li><a class="nav-text" href="index.html" class="green-text">Home</a></li>
	        	    <li class="nav-current-page">Programming</li>
	        	    <li><a class="nav-text" href="music.html">Music</a></li>
	        	    <li><a class="nav-text" href="contact.html">Contact</a><li>
	    		  </ul>
	  		</div>
	  		<div class="container fade-in">
	  			<div class="row">
	  				<div>
	  					<h2 class="text-center">Projects</h2>
	  					<div class="col-md-4" id="a-coding-project">
	  						<div class="a-coding-project">
	  							<a class="fancybox" href="#spotify-box">
	  								<img class="project-thumbnail" src="pictures/spotify.jpg">
	  							</a>
	  							<h4 class="text-center">Spotify Top 100 D3 Visualizations.</h4>
	  						</div>
	  					</div>
	  					<div class="col-md-4" id="a-coding-project">
	  						<div class="a-coding-project">
								<a class="project-thumbnail" href="bbbutton.html">
									<img class="project-thumbnail" src="pictures/billboard/billboardequal.jpg">
								</a>
								<h4 class="text-center">The Billboard Button Chrome extension.</h4>
							</div>
	  					</div>
	  					<div class="col-md-4" id="a-coding-project">
	  						<div class="a-coding-project">
								<a class="project-thumbnail" href="soundshow.html">
									<img class="project-thumbnail" src="pictures/soundshow/soundshow.png">
								</a>
								<h4 class="text-center">Soundshow: A custom lightshow creator.</h4>
							</div>
	  					</div>
					</div>
				</div>
				<div id="spotify-box" class="colored-font" style="display: none">
					<h1 class="text-center">Spotify Top 100 Visualizations</h1>
					<h4 class="text-center" style="width: 150vh; padding-bottom: 15px">I used D3 to create a series of visualizations offering insight into my Spotify Top Tracks of 2016 playlist. You can view the same visualizations over your playlist as long as you're following your Top 100 playlist (go to <a href="https://open.spotify.com/view/2016-page" target="_blank">2016 Wrapped</a> and click "View On Spotify") </h4>
					<div class="col-sm-6 text-center">
						<button class="sp-button" id="login-button">LOGIN TO YOUR SPOTIFY</button>
					</div>
					<div class="col-sm-6 text-center">
						<a href="spotify100/insights.html"><button class="sp-button" style="background-color: #2274A5">USE RYAN'S PLAYLIST</button></a>
					</div> 	
				</div>
			</div>
		</div>
		<script>
		function generateRandomString(length) {
          var text = '';
          var possible = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';

          for (var i = 0; i < length; i++) {
            text += possible.charAt(Math.floor(Math.random() * possible.length));
          }
          return text;
        };

		document.getElementById('login-button').addEventListener('click', function() {
		  var stateKey = 'spotify_auth_state';
	      var client_id = '91447869cdba4a8abf2a141784665052'; // Your client id
	      var redirect_uri = 'https://aljondo.github.io/spotify100/insights.html'; // Your redirect uri
	      console.log("REDIRECT")
	      console.log(redirect_uri)
	      var state = generateRandomString(16);

	      localStorage.setItem(stateKey, state);
	      var scope = 'user-read-private user-read-email';

	      var url = 'https://accounts.spotify.com/authorize';
	      url += '?response_type=token';
	      url += '&client_id=' + encodeURIComponent(client_id);
	      url += '&scope=' + encodeURIComponent(scope);
	      url += '&redirect_uri=' + encodeURIComponent(redirect_uri);
	      url += '&state=' + encodeURIComponent(state);

          //figure this out later, when its uploaded
          //window.open(
          	//url
          //);
          window.location = url;
        }, false);
		</script>
	</body>
</html>

